<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE faqs PUBLIC "-//APACHE//DTD FAQ V2.0//EN" "dtd/faq-v20.dtd">
<faqs>
	<title>Scriptella ETL Frequently Asked Questions</title>
	<authors>
		<person name="Fyodor Kupolov" email="kupolov@gmail.com"/>
	</authors>
	<faqsection>
		<title>General</title>
		<faq id="DRIVERS">
			<question>Where can I find documentation on script syntax for driver FOO/BAR/...?</question>
			<answer><p>The up to date drivers documentation is available in the <a href="docs/api/">Scriptella Javadoc</a>.
			<a href="reference/index.html">Reference Documentation</a> also covers drivers usage and scripts syntax.</p></answer>
        </faq>
        <faq id="BIND_VARS">
            <question>What is the difference between $variable / ${expression} and ?variable / ?{expression} syntax.</question>
			<answer><p>Binding variables syntax varies between drivers. JDBC drivers use the following rules
                for properties substitution:</p>
                <ul>
                    <li>$variable - inserts a value of the variable as text content.</li>
                    <li>${expression} - braces are used for JEXL expressions. For example
                    ${column1+column2} inserts the sum of 2 columns.</li>
                    <li>?variable, ?{expression} - syntax is the same as in 2 previous examples, but the
                    result of evaluation is set as a prepared statement parameter, thus increasing the performance
                    and eliminating the need to escape values.
                    <br/>Please note that currently ?{} syntax is only supported by the JDBC drivers.</li>
                </ul>
                <p>See <a href="reference/index.html#BIND_VARIABLES">Reference Manual</a> for additional details.</p>
            </answer>
        </faq>

        <faq id="COLUMN_SPACES">
            <question>How to escape spaces in field names?</question>
            <answer><p>Scriptella does not support whitespaces in field names, nevertheless several drivers
                including CSV and JDBC allow referencing columns by an index, i.e. $1, $2 ... $n.
                <br/>Example:
            </p>
                <source><![CDATA[
<query connection-id="csv"> <!-- Read CSV file content -->
    <script connection-id="text">
        $1,$2,$3,$4 <!-- Print columns 1-4 -->
    </script>
</query>]]>
                </source>
            </answer>
        </faq>
        <!-- More faqs or parts here -->
	</faqsection>
    <faqsection>
        <title>SQL</title>
        <faq id="PLSQL">
            <question>How to create an Oracle trigger (run a PL/SQL block)?</question>
            <answer><p>
                To recognize Oracle PL/SQL statement blocks you'd have to specify <code>plsql=true</code> connection property
                (supported only by <a href="reference/drivers.html#oracle">Scriptella Adapter for Oracle</a>).
                In this case a slash(/) on a single line is used as a statement separator:</p>
            <source><![CDATA[
<connection driver="oracle" ...>
    plsql=true
</connection>
<script>
    CREATE OR REPLACE TRIGGER secure_del_trigger
       BEFORE DELETE
       ON emp
       FOR EACH ROW
    DECLARE
       unauthorized_deletion   EXCEPTION;
    BEGIN
       IF <your business rule is violated> THEN
         RAISE unauthorized_deletion;
       END IF;
    EXCEPTION
       WHEN unauthorized_deletion
       THEN
          raise_application_error (-20500,
            'This record cannot be deleted');
    END;
    /

    -- Other statements separated with a slash on a single line
</script>]]>

            </source>
                <p>If you are using Oracle JDBC driver directly then set the following configuration properties:</p>
                <source><![CDATA[
<connection driver="oracle.jdbc.driver.OracleDriver" ...>
    statement.separator=/
    statement.separator.singleline=true
</connection>]]>
                </source>
                <p>This idea is similar to <a href="http://www.javaddicts.net/blog/index.php/2005/06/13/executing-oracle-plsql-from-ant/">Ant solution</a>.</p>
            </answer>
        </faq>
    </faqsection>
    <!-- More faqs or parts here -->
</faqs>
