<!DOCTYPE scripts SYSTEM "scriptella.dtd">
<scripts>
    <connection id="in" driver="org.hsqldb.jdbcDriver" url="jdbc:hsqldb:mem:indb" user="sa" password=""/>
    <connection id="out" driver="org.hsqldb.jdbcDriver" url="jdbc:hsqldb:file:outdb" user="sa" password=""/>
    <script connection-id="in">
        CREATE TABLE Test (<include href="fields.sql"/>);

        insert into Test(id, text) values (1, 'One');
    </script>
    <script connection-id="out">
        CREATE TEXT TABLE Test (<include href="fields.sql"/>);
        SET TABLE Test SOURCE "result.csv"
    </script>

    <query connection-id="in">
        select * from test
        <script connection-id="out">
            insert into Test(id, text) values ($id, $text);
        </script>
    </query>

    <script connection-id="out"><!-- Correctly shutdown the DB -->
        COMMIT;
        SHUTDOWN;
    </script>
</scripts>